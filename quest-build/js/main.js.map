{"version":3,"file":"main.js","sources":["js/util.js","js/data/quest.js","js/view.js","js/game/level-view.js","js/gameover/gameover-view.js","js/model.js","js/data/quest-adapter.js","js/game/game.js","js/splash-screen/splash-screen.js","js/welcome/welcome-view.js","js/welcome/welcome.js","js/main.js"],"sourcesContent":["export const createElement = (template) => {\n    const outer = document.createElement(`div`);\n    outer.innerHTML = template;\n    return outer;\n};\n\nconst main = document.getElementById(`main`);\n\nexport const changeView = (view) => {\n    main.innerHTML = ``;\n    main.appendChild(view.element);\n};","export const initialGame = {\n  level: 0,\n  lives: 3,\n  time:0  \n};\n\nexport const setLives = (game, lives) => {\n    if ( lives < 0 ) {\n        throw new RangeError(`Can't set negative lives`);\n    } \n    game = Object.assign({}, game);\n    game.lives = lives;\n    return game;\n};\n\nexport const getLevel = (num, quest) => quest[`level-${num}`];\n\nexport const nextLevel = (state, quest) => {\n    const next = state.level + 1;\n    if (!getLevel(next, quest)) {\n        throw new RangeError(`Can't find level ${next}`);\n    }\n    state = Object.assign({}, state);\n    state.level = next;\n    return state;\n};\n\nconst LEFT = `LEFT`;\nconst RIGHT = `RIGHT`;\nconst JUMP = `JUMP`;\nconst ONE = `1`;\nconst TWO = `2`;\nconst THREE = `3`;\nconst FOUR = `4`;\n\nexport const Action = {\n    LEFT, RIGHT, JUMP, ONE, TWO, THREE, FOUR\n};\n\nexport const Result = {\n    DIE: `die`,\n    NOOP: `noop`,\n    NEXT: `next`,\n    WIN: `win`\n};","import {createElement} from './util';\n\nexport default class AbstractView {\n\n    get template() {\n        throw new Error(`You have to define template for view`);\n    }\n\n    render() {\n        return createElement(this.template);\n    }\n\n    bind() {\n\n    }\n\n    get element() {\n        if (!this._element) {\n            this._element = this.render();\n            this.bind();\n        }\n        return this._element;\n    }\n\n}\n","import {getLevel} from \"../data/quest\";\nimport AbstractView from '../view';\n\nconst   ENTER_KEYCODE = 13;\n\nconst drawHeart = (full) => {\n    return `<span class=\"Heart__${(full ? `full` : `empty`)}\">${full ? `&#9829;` : `&#9825;`}</span>`;\n};\n\nconst drawHeader = (data) => {\n    return `\n    <header class=\"header\">\n    <div>Мир: ${data.level}</div>\n    <div>\n    Жизни: ${drawHeart(data.lives > 2)}\n          ${drawHeart(data.lives > 1)}\n          ${drawHeart(data.lives > 0)}\n    </div>\n    <div>Время: ${data.time}</div>\n</header>`\n};\n\nexport default class LevelView extends  AbstractView {\n    constructor(state, model) {\n        super();\n        this.state = state;\n        this.model = model;\n    }\n    \n    get template() {\n        const level = getLevel(this.state.level, this.model);\n        \n        const answerNames = Object.keys(level.answers);\n        const answers = answerNames.map((key) => ({key, value: level.answers[key]}));\n        \n        return `\n        ${drawHeader(this.state)}\n        <div class=\"quest\">\n            <p class=\"text\">${level.text}</p>\n            <input type=\"text\">\n            <ul class=\"answers\">\n            ${answers.map(({key, value}) => `<li class=\"answer\">${key}. ${value.description}</li>`).join(``)}\n            </ul>\n        </div>\n        <small>Для справки введите <i>help</i></small>`.trim();\n    }\n    \n    bind() {\n        const input = this.element.querySelector(`input`);\n        input.onkeydown = (evt) => {\n            if (evt.keyCode === ENTER_KEYCODE) {\n                const level = getLevel(this.state.level, this.model);\n                const answer = level.answers[input.value.toUpperCase()];\n                \n                if (answer) {\n                    this.onAnswer(answer);\n                }\n            }\n        };\n    }\n    \n    onAnswer(answer) {\n        return answer;\n    }\n    \n    updateTimer(time) {\n        const timerContainer = this.element.querySelector(`header div:last-child`);\n        timerContainer.textContent = `Время: ${time}`;\n    }\n}","import AbstractView from '../view';\nexport default class GameOverView extends AbstractView {\n    constructor(isWin) {\n        super();\n        this.isWin = isWin;\n    }\n\n    get template() {\n        let message;\n        if (this.isWin) {\n            message = `<p>УРА</p><p>ПОБЕДА</p>`;\n        } else {\n            message = `<p>КОНЕЦ!</p><p>ПОВТОРИМ?</p>`;\n        }\n        return `\n        <div class=\"end\">\n        ${message.trim()}\n        <div class=\"repeat\">\n            <span class=\"repeat-action\">Да</span>|<span class=\"repeat-action\">Нет</span>\n            </div>\n        </div>`;\n    }\n\n    bind() {\n        this.element.querySelector(`span.repeat-action`).onclick = (evt) => {\n            evt.preventDefault();\n\n            this.onRepeat();\n        };\n    }\n\n    onRepeat() {}\n\n}","export class DefaultAdapter {\n    constructor() {\n        if (new.target === DefaultAdapter) {\n            throw new Error();\n        }\n    }\n\n    preprocess(data) {\n        return data;\n    }\n\n    toServer(data) {\n        return data;\n    }\n}\n\n\nconst defaultAdapter = new class extends DefaultAdapter {}();\n\n\nexport default class Model {\n    get urlRead() {\n        throw new Error(`Abstract method. Define the URL for model.`);\n    }\n\n    get urlWrite() {\n        throw new Error(`Abstract method. Define the URL for model.`);\n    }\n\n    load(adapter = defaultAdapter) {\n        return fetch(this.urlRead)\n            .then((resp) => resp.json())\n            .then(adapter.preprocess);\n    }\n\n    send(data, adapter = defaultAdapter) {\n        const requestSettings = {\n            body: adapter.toServer(data),\n            headers: {\n                'Content-Type': `application/json`\n            },\n            method: `POST`\n        };\n\n        return fetch(this.urlWrite, requestSettings)\n            .then(this.onUpload);\n    }\n}\n","import {DefaultAdapter} from '../model';\n\n\nconst preprocessAnswers = (answers) => {\n    const answersObj = {};\n\n    answers.forEach((answer) => {\n        const splitAction = answer.action.split(`.`);\n        answersObj[splitAction[0]] = {\n            'description': splitAction[1],\n            'result': answer.result\n        };\n    });\n    return answersObj;\n};\n\nexport default new class extends DefaultAdapter {\n    preprocess(data) {\n        const preprocessed = {};\n        Object.keys(data).forEach((it, i) => {\n            preprocessed[`level-${i}`] = {\n                text: data[it].text,\n                answers: preprocessAnswers(data[it].answers)\n            };\n        });\n\n        return preprocessed;\n    }\n\n    toServer(data) {\n        return JSON.stringify(data);\n    }\n}();\n","import {initialGame, nextLevel, Result, setLives} from \"../data/quest\";\nimport LevelView from './level-view';\nimport {changeView} from '../util';\nimport GameOverView from '../gameover/gameover-view';\nimport QuestAdapter from '../data/quest-adapter';\n\nexport default class Game {\n    constructor(model, quest) {\n        this.model = model;\n        this.quest = quest;\n    }\n\n    init() {\n        this.changeLevel(initialGame);\n    }\n\n    get view() {\n        return this._view;\n    }\n\n    set view(view) {\n        this._view = view;\n        changeView(view);\n    }\n\n    changeLevel(state) {\n        this.state = state;\n        this.view = new LevelView(this.state, this.quest);\n        this.tickTimer();\n\n        this.view.onAnswer = (answer) => {\n            this.stopTimer();\n\n            switch (answer.result) {\n                case Result.DIE:\n                    this.die();\n                    break;\n\n                case Result.WIN:\n                    this.win();\n                    break;\n\n                case Result.NEXT:\n                    this.changeLevel(nextLevel(this.state, this.quest));\n                    break;\n\n                default:\n                    throw new Error(`Unknown result ${answer.result}`);\n            }\n        }\n    }\n\n    tickTimer() {\n        this.state = Object.assign({}, this.state, {\n            time: this.state.time + 1\n        });\n        this.view.updateTimer(this.state.time);\n\n        this.timeout = setTimeout(() => this.tickTimer(), 1000);\n    }\n\n    stopTimer() {\n        clearTimeout(this.timeout);\n    }\n\n    die() {\n        this.view = new GameOverView(false);\n        this.view.onRepeat = () => {\n            this.changeLevel(setLives(this.state, this.state.lives - 1));\n        }\n    }\n\n    win() {\n        this.model.send(this.state, QuestAdapter).then(() => {\n            this.view = new GameOverView(true);\n            this.view.onRepeat = () => {\n                this.changeLevel(initialGame);\n            };\n        });\n    }\n}","import AbstractView from '../view';\n\n\nexport default class SplashScreen extends AbstractView {\n    constructor() {\n        super();\n        this.cursor = 0;\n        this.symbolsSeq = `/—\\\\|`;\n    }\n\n    get template() {\n        return `<div></div>`;\n    }\n\n    start() {\n        this.cursor = ++this.cursor >= this.symbolsSeq.length ? 0 : this.cursor;\n        this.element.textContent = this.symbolsSeq[this.cursor];\n        this.timeout = setTimeout(() => this.start(), 50);\n    }\n\n    hide() {\n        clearTimeout(this.timeout);\n    }\n}\n","import AbstractView from '../view';\n\nconst ENTER_KEYCODE = 13;\nconst START_COMMAND = `start`;\n\nexport default class WelcomeView extends AbstractView {\n\n    get template() {\n        return `\n        <div class=\"quest\">\n        <p class=\"title\">К В Е С Т</p>\n        <p class=\"text\">Это игра, где вы — главное действующее лицо. И от ваших действий зависит успех и победа в этой игре.</p>\n        <p class=\"text\">Набери в поле ввода <b>${START_COMMAND}</b>, чтобы начать игру!\"</p>\n        <input type=\"text\">\n</div>`.trim();\n    }\n\n    bind() {\n        const input = this.element.querySelector(`input`);\n        input.onkeydown = (evt) => {\n            if (evt.keyCode === ENTER_KEYCODE) {\n                const value = input.value || ``;\n                if (value.toLocaleLowerCase() === START_COMMAND) {\n                    this.onStart();\n                }\n            }\n        }\n    }\n\n    onStart() {}\n}","import {changeView} from '../util';\nimport WelcomeView from './welcome-view';\nimport App from '../main';\n\n\nexport default class Welcome {\n    constructor() {\n        this.view = new WelcomeView();\n    }\n\n    init() {\n        App.showWelcome();\n        changeView(this.view);\n\n        this.view.onStart = () => {\n            App.showGame();\n        };\n    }\n}","import {changeView} from './util';\nimport Game from './game/game';\nimport Model from './model';\nimport questAdapter from './data/quest-adapter';\nimport SplashScreen from './splash-screen/splash-screen';\nimport Welcome from './welcome/welcome';\n\n\nconst ControllerID = {\n    WELCOME: ``,\n    GAME: `game`,\n    WIN: `die`,\n    DIE: `win`,\n};\n\n\nconst getControllerIDFromHash = (hash) => hash.replace(`#`, ``);\n\n\nclass App {\n    constructor() {\n        const preloaderRemove = this.showPreloader();\n\n        this.model = new class extends Model {\n            get urlRead() {\n                return `https://intensive-ecmascript-server-srmhvdwcks.now.sh/text-quest/quest`;\n            }\n\n            get urlWrite() {\n                return `true`;\n            }\n        }();\n\n        this.model.load(questAdapter)\n            .then((data) => this.setup(data))\n            .then(preloaderRemove)\n            .then(() => this.changeController(getControllerIDFromHash(location.hash)))\n            .catch(window.console.error);\n    }\n\n    setup(data) {\n        this.routes = {\n            [ControllerID.WELCOME]: new Welcome(),\n            [ControllerID.GAME]: new Game(this.model, data)\n        };\n\n        window.onhashchange = () => {\n            this.changeController(getControllerIDFromHash(location.hash));\n        };\n    }\n\n    changeController(route = ``) {\n        this.routes[route].init();\n    }\n\n    showPreloader() {\n        const splashScreen = new SplashScreen();\n        changeView(splashScreen);\n        splashScreen.start();\n\n        return () => splashScreen.hide();\n    }\n\n    showWelcome() {\n        location.hash = ControllerID.WELCOME;\n    }\n\n    showGame() {\n        location.hash = ControllerID.GAME;\n    }\n}\n\nexport default new App();\n"],"names":["ENTER_KEYCODE","App","questAdapter"],"mappings":"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"}